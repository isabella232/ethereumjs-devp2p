<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1121" height="855" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-06-18T18:04:36.251Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Safari/537.36&quot; etag=&quot;Pm7foRQuc6sVuj33Trug&quot; version=&quot;13.2.6&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;EaUS_ncg3DNfHO04Nlih&quot; name=&quot;diagram&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" version="1.1" viewBox="-0.5 -0.5 1121 855" style="background-color:#fff"><defs><linearGradient id="mx-gradient-ff9999-1-f8cecc-1-s-0" x1="0%" x2="0%" y1="100%" y2="0%"><stop offset="0%" style="stop-color:#f8cecc"/><stop offset="100%" style="stop-color:#f99"/></linearGradient><linearGradient id="mx-gradient-b9e0a5-1-d5e8d4-1-s-0" x1="0%" x2="0%" y1="100%" y2="0%"><stop offset="0%" style="stop-color:#d5e8d4"/><stop offset="100%" style="stop-color:#b9e0a5"/></linearGradient><linearGradient id="mx-gradient-ffe599-1-fff2cc-1-s-0" x1="0%" x2="0%" y1="100%" y2="0%"><stop offset="0%" style="stop-color:#fff2cc"/><stop offset="100%" style="stop-color:#ffe599"/></linearGradient></defs><g><rect width="300" height="290" x="800" y="504" fill="url(#mx-gradient-ff9999-1-f8cecc-1-s-0)" stroke="#b85450" stroke-width="2" pointer-events="all"/><rect width="520" height="420" x="580" y="44" fill="url(#mx-gradient-b9e0a5-1-d5e8d4-1-s-0)" stroke="#82b366" stroke-width="2" pointer-events="all"/><rect width="440" height="690" x="21" y="44" fill="url(#mx-gradient-ffe599-1-fff2cc-1-s-0)" stroke="#ff8000" stroke-width="2" pointer-events="all"/><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 347 304 L 347 254 L 347.31 231.14" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 347.38 225.89 L 350.79 232.94 L 347.31 231.14 L 343.79 232.84 Z" pointer-events="all"/><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 350 464 L 350 494 L 350.39 548.59" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 350.43 553.84 L 346.88 546.87 L 350.39 548.59 L 353.88 546.82 Z" pointer-events="all"/><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 281 344 L 167.37 344" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 162.12 344 L 169.12 340.5 L 167.37 344 L 169.12 347.5 Z" pointer-events="all"/><path fill="none" stroke="red" stroke-miterlimit="10" d="M 441 344 L 594.63 344" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 599.88 344 L 592.88 347.5 L 594.63 344 L 592.88 340.5 Z" pointer-events="all"/><path fill="none" stroke="red" stroke-miterlimit="10" d="M 441 430.4 L 595.91 613" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 600.28 618.15 L 591.02 614.2 L 595.91 613 L 597.89 608.37 Z" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:509px;margin-left:508px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;background-color:#fff;white-space:nowrap"><font color="red">error</font></div></div></div></foreignObject><text x="508" y="513" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">error</text></switch></g><rect width="160" height="160" x="281" y="304" fill="#fff" stroke="#000" pointer-events="all" rx="24" ry="24"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:158px;height:1px;padding-top:384px;margin-left:283px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px">devp2p:dpt</b></span></div><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px"><br style="font-size:12px"/></b></span></div><font color="#00f" style="font-size:12px"/><font style="font-size:12px">DPT (EventEmitter)<br style="font-size:12px"/></font><br style="font-size:12px"/><font color="#00f" style="font-size:12px">bootstrap()</font><b style="font-size:12px;background-color:#ff0">(1)</b><br style="font-size:12px"/><font color="#00f" style="font-size:12px">addPeer()</font><span style="font-weight:700;font-size:12px;background-color:#ff0">(2)</span><br style="font-size:12px"/><br style="font-size:12px"/><span style="background-color:#fff"><font color="#f33">ping →</font><font color="#00f" style="font-size:12px">_onKBucketPing</font><br style="font-size:12px"/><font color="#f33" style="font-size:12px">peers</font><font color="#f33">→</font><font color="#00f" style="font-size:12px">_onServerPeers<br style="font-size:12px"/></font></span><font color="#00f">→ addPeer()</font></div></div></div></foreignObject><text x="283" y="388" fill="#000" font-family="Helvetica" font-size="12">devp2p:dpt...</text></switch></g><path fill="none" stroke="red" stroke-miterlimit="10" d="M 371 224 L 371 297.63" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 371 302.88 L 367.5 295.88 L 371 297.63 L 374.5 295.88 Z" pointer-events="all"/><path fill="none" stroke="#000" stroke-dasharray="3 3" stroke-miterlimit="10" d="M 281 157 L 160 157 L 161 154.5" pointer-events="stroke"/><rect width="160" height="110" x="281" y="114" fill="#fff" stroke="#000" pointer-events="all" rx="16.5" ry="16.5"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:158px;height:1px;padding-top:169px;margin-left:282px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:left"><span>KBucket (EventEmitter)</span></div><div style="text-align:left"><br/></div><div style="text-align:left"><span>Peer Pool for DPT</span></div><div style="text-align:left"><br/></div><div style="text-align:left"><font color="#00f">add()</font><b style="background-color:#ff0">(5)</b></div><div style="text-align:left"><span><font color="#00f">get()</font></span></div></div></div></div></foreignObject><text x="361" y="173" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">KBucket (EventEmitter)...</text></switch></g><rect width="60" height="50" x="371" y="234" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:259px;margin-left:401px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="text-align:left"><span><font color="red">added</font></span></div><div style="text-align:left"><span><font color="red">removed</font></span></div><div style="text-align:left"><span><font color="red">ping</font></span></div></div></div></div></foreignObject><text x="401" y="263" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">added...</text></switch></g><path fill="none" stroke="red" stroke-miterlimit="10" d="M 371 554 L 371 470.37" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 371 465.12 L 374.5 472.12 L 371 470.37 L 367.5 472.12 Z" pointer-events="all"/><rect width="160" height="160" x="281" y="554" fill="#fff" stroke="#000" pointer-events="all" rx="24" ry="24"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:158px;height:1px;padding-top:634px;margin-left:283px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div><b>devp2p:dpt:server</b><br/></div><div style="text-align:right"><br/></div><div><span>Server (EventEmitter)</span><br/></div><div>-<font color="#00f">socket</font></div><div><font color="#00f"><br/></font></div>handles:<br/><font color="#00f">ping (</font><span style="color:#00f">→ pong)</span><b style="background-color:#ff0">(3)</b><br/><font color="#00f">pong<br/></font><font color="#00f">findNeighbors<br/>neighbors</font></div></div></div></foreignObject><text x="283" y="638" fill="#000" font-family="Helvetica" font-size="12">devp2p:dpt:se...</text></switch></g><rect width="60" height="60" x="371" y="479" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:509px;margin-left:401px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="text-align:left"><font color="red">listening</font></div><div style="text-align:left"><font color="red">close</font></div><div style="text-align:left"><font color="red">error</font></div><div style="text-align:left"><font color="red">peers</font></div></div></div></div></foreignObject><text x="401" y="513" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">listening...</text></switch></g><path fill="none" stroke="red" stroke-miterlimit="10" d="M 161 174 L 274.63 174" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 279.88 174 L 272.88 177.5 L 274.63 174 L 272.88 170.5 Z" pointer-events="all"/><rect width="120" height="70" x="41" y="134" fill="#fff" stroke="#000" stroke-dasharray="3 3" pointer-events="all" rx="10.5" ry="10.5"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:118px;height:1px;padding-top:169px;margin-left:42px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:left"><span><b>k-bucket</b></span></div><div style="text-align:left"><br/></div><div style="text-align:left"><span>Contract object</span></div><div style="text-align:left"><span>Storage</span></div></div></div></div></foreignObject><text x="101" y="173" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">k-bucket...</text></switch></g><rect width="60" height="50" x="192" y="174" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:199px;margin-left:222px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div><span><font color="red">added</font></span></div><div><span><font color="red">removed</font></span></div><div><span><font color="red">ping</font></span></div></div></div></div></foreignObject><text x="222" y="203" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">added...</text></switch></g><rect width="120" height="90" x="41" y="314" fill="#fff" stroke="#000" pointer-events="all" rx="13.5" ry="13.5"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:118px;height:1px;padding-top:359px;margin-left:42px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:right"><span><b>devp2p:dpt:ban-list</b></span></div><div style="text-align:right"><br/></div><div style="text-align:left"><span>BanList</span></div><div style="text-align:left"><span><font color="#00f">add()</font></span></div><div style="text-align:left"><span><font color="#00f">has()</font></span></div></div></div></div></foreignObject><text x="101" y="363" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">devp2p:dpt:ban-list...</text></switch></g><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 281 614 L 167.37 614" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 162.12 614 L 169.12 610.5 L 167.37 614 L 169.12 617.5 Z" pointer-events="all"/><rect width="120" height="130" x="41" y="584" fill="#fff" stroke="#000" pointer-events="all" rx="18" ry="18"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:118px;height:1px;padding-top:649px;margin-left:43px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div>message.ts</div><div><br/></div><div>Encode / decode</div><div><br/></div><div><font color="#00f">ping</font></div><div><font color="#00f">pong</font></div><div><font color="#00f">findNeighbors</font></div><div><font color="#00f">neighbors</font></div></div></div></div></foreignObject><text x="43" y="653" fill="#000" font-family="Helvetica" font-size="12">message.ts...</text></switch></g><rect width="60" height="20" x="399" y="24" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:34px;margin-left:429px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><b><font color="#ff8000" style="font-size:24px">DPT</font></b></div></div></div></foreignObject><text x="429" y="38" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">DPT</text></switch></g><rect width="250" height="100" x="31" y="734" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:1px;height:1px;padding-top:784px;margin-left:33px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><p style="line-height:150%"><u>Key:</u><br/><span style="background-color:#ff0"><b>(#)</b></span>Exemplary msg and event flow for a peer<br/><font color="red">● Events</font><br/><b>devp2p:dpt:*</b>Logger name</p></div></div></div></foreignObject><text x="33" y="788" fill="#000" font-family="Helvetica" font-size="12">Key:...</text></switch></g><rect width="90" height="30" x="481" y="344" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:359px;margin-left:526px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="text-align:left"><font color="red">peer: new</font><b style="background-color:#ff0">(4)</b></div><div style="text-align:left"><span style="color:red">peer: removed</span><br/></div></div></div></div></foreignObject><text x="526" y="363" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">peer: new (4)...</text></switch></g><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 601 324 L 571 324 L 447.37 324" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 442.12 324 L 449.12 320.5 L 447.37 324 L 449.12 327.5 Z" pointer-events="all"/><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 761 394 L 861 394 L 864.63 394" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 869.88 394 L 862.88 397.5 L 864.63 394 L 862.88 390.5 Z" pointer-events="all"/><path fill="none" stroke="red" stroke-miterlimit="10" d="M 767.37 374 L 816 374 L 816 374.1 L 872.65 374.06" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 762.12 374 L 769.12 370.5 L 767.37 374 L 769.12 377.5 Z" pointer-events="all"/><path fill="none" stroke="red" stroke-miterlimit="10" d="M 681 414 L 681 591.13" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 681 597.88 L 676.5 588.88 L 681 591.13 L 685.5 588.88 Z" pointer-events="all"/><rect width="160" height="160" x="601" y="254" fill="#fff" stroke="#000" pointer-events="all" rx="24" ry="24"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:158px;height:1px;padding-top:334px;margin-left:603px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px">devp2p:rlpx</b></span></div><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px"><br style="font-size:12px"/></b></span></div><font color="#00f" style="font-size:12px"/><font style="font-size:12px">RLPx (EventEmitter)</font><br style="font-size:12px"/><font color="#00f" style="font-size:12px"/><font style="font-size:12px">- server</font><br style="font-size:12px"/><font style="font-size:12px">- capabilities<br/>(e.g. ETH.eth63)<br/></font>- peers<br style="font-size:12px"/><br/>Manages peer connections<br/><font color="#00f">connect()</font><span style="background-color:#ff0"><b>(6)</b></span></div></div></div></foreignObject><text x="603" y="338" fill="#000" font-family="Helvetica" font-size="12">devp2p:rlpx...</text></switch></g><rect width="140" height="20" x="461" y="304" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:314px;margin-left:531px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap">new RLPx(_, dpt: DPT)</div></div></div></foreignObject><text x="531" y="318" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">new RLPx(_, dpt: DPT)</text></switch></g><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 949 254 L 949 234 L 949 230.37" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 949 225.12 L 952.5 232.12 L 949 230.37 L 945.5 232.12 Z" pointer-events="all"/><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 946 434 L 946 596.13" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 946 602.88 L 941.5 593.88 L 946 596.13 L 950.5 593.88 Z" pointer-events="all"/><rect width="150" height="180" x="871" y="254" fill="#fff" stroke="#000" pointer-events="all" rx="22.5" ry="22.5"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:148px;height:1px;padding-top:344px;margin-left:873px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px">devp2p:rlpx:peer</b></span></div><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px"><br style="font-size:12px"/></b></span></div><font color="#00f" style="font-size:12px"/><font style="font-size:12px">Peer (EventEmitter)</font><br style="font-size:12px"/><font color="#00f" style="font-size:12px">- send...<br/></font><font color="#00f" style="font-size:12px">Auth()<br/>Ack()<br/>Message()<br/>Hello()<br/>Ping(), Pong()<br/></font><br/>SubProtocol<br/><font color="#00f" style="background-color:#fcc">_sendMessage()</font><span style="background-color:#ff0"><b>(13)</b></span></div></div></div></foreignObject><text x="873" y="348" fill="#000" font-family="Helvetica" font-size="12">devp2p:rlpx:peer...</text></switch></g><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 871 147.04 L 841 147 L 810.37 147.03" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 805.12 147.04 L 812.11 143.53 L 810.37 147.03 L 812.12 150.53 Z" pointer-events="all"/><rect width="150" height="110" x="871" y="114" fill="#fff" stroke="#000" pointer-events="all" rx="16.5" ry="16.5"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:148px;height:1px;padding-top:169px;margin-left:872px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:left"><span>ECIES</span></div><div style="text-align:left"><span>Msg encryption/parsing...</span></div><div style="text-align:left"><span>Auth (EIP8)</span></div><div style="text-align:left"><span>Ack (EIP8)</span></div><div style="text-align:left"><span>Header</span></div><div style="text-align:left"><span>Body</span></div></div></div></div></foreignObject><text x="946" y="173" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">ECIES...</text></switch></g><rect width="110" height="60" x="694" y="124" fill="#fff" stroke="#000" pointer-events="all" rx="9" ry="9"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:108px;height:1px;padding-top:154px;margin-left:695px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:left"><span>MAC</span></div><font color="#00f"><div style="text-align:left"><span>updateHeader()</span></div><div style="text-align:left"><span>updateBody()</span></div></font></div></div></div></foreignObject><text x="749" y="158" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">MACupdateHeader()...</text></switch></g><rect width="80" height="20" x="581" y="25" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:35px;margin-left:621px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><b><font style="font-size:24px" color="#82b366">RLPX</font></b></div></div></div></foreignObject><text x="621" y="39" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">RLPX</text></switch></g><rect width="520" height="60" x="580" y="44" fill="#d5e8d4" stroke="#82b366" stroke-width="2" pointer-events="all"/><rect width="360" height="60" x="590" y="43" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:1px;height:1px;padding-top:73px;margin-left:592px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><p style="line-height:130%">The transport layer to agree on capabilities, message encryption,<br/>and send upper-layer message (e.g. ETH) through the wire.</p></div></div></div></foreignObject><text x="592" y="77" fill="#000" font-family="Helvetica" font-size="12">The transport layer to agree on capabilities, message encryp...</text></switch></g><rect width="18" height="20" x="926" y="316" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe flex-start;justify-content:unsafe flex-start;width:16px;height:1px;padding-top:323px;margin-left:928px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><b style="color:#000;font-family:&quot;helvetica&quot;;font-size:12px;font-style:normal;letter-spacing:normal;text-align:left;text-indent:0;text-transform:none;word-spacing:0;background-color:#ff0">(8)</b></div></div></div></foreignObject><text x="928" y="335" fill="#000" font-family="Helvetica" font-size="12">(8)</text></switch></g><rect width="70" height="40" x="789" y="334" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe flex-start;justify-content:unsafe flex-start;width:68px;height:1px;padding-top:341px;margin-left:791px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="color:#000;font-family:&quot;helvetica&quot;;font-size:12px;font-style:normal;font-weight:400;letter-spacing:normal;text-indent:0;text-transform:none;word-spacing:0;text-align:left"><font color="red">connect</font><b style="background-color:#ff0">(9)</b></div><div style="color:#000;font-family:&quot;helvetica&quot;;font-size:12px;font-style:normal;font-weight:400;letter-spacing:normal;text-indent:0;text-transform:none;word-spacing:0;text-align:left"><span style="color:red">error</span></div></div></div></div></foreignObject><text x="791" y="353" fill="#000" font-family="Helvetica" font-size="12">connect (9)...</text></switch></g><rect width="130" height="50" x="759" y="398" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:423px;margin-left:824px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="text-align:left"><span>new Peer({</span></div><div style="text-align:left"><span>socket, clientId,</span></div><div style="text-align:left"><span>capabilities, port, ...})</span></div></div></div></div></foreignObject><text x="824" y="427" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">new Peer({...</text></switch></g><rect width="18" height="20" x="745" y="396" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe flex-start;justify-content:unsafe flex-start;width:16px;height:1px;padding-top:403px;margin-left:747px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><b style="color:#000;font-family:&quot;helvetica&quot;;font-size:12px;font-style:normal;letter-spacing:normal;text-align:left;text-indent:0;text-transform:none;word-spacing:0;background-color:#ff0">(7)</b></div></div></div></foreignObject><text x="747" y="415" fill="#000" font-family="Helvetica" font-size="12">(7)</text></switch></g><rect width="160" height="80" x="601" y="599" fill="#fff" stroke="#000" pointer-events="all" rx="12" ry="12"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:158px;height:1px;padding-top:639px;margin-left:603px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div><span>Consumer</span></div><div><br/></div><div><span>See</span><span>examples/</span></div><div><span>peer-communication.ts</span></div></div></div></div></foreignObject><text x="603" y="643" fill="#000" font-family="Helvetica" font-size="12">Consumer...</text></switch></g><rect width="110" height="90" x="681" y="486" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:531px;margin-left:736px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="text-align:left"><font color="red">peer: added</font><b style="background-color:#ff0">(10)</b></div><div style="text-align:left"><font color="red">peer: removed</font></div><div style="text-align:left"><font color="red">peer: error</font></div><div style="text-align:left"><font color="red">listening</font></div><div style="text-align:left"><font color="red">close</font></div><div style="text-align:left"><font color="red">error</font></div></div></div></div></foreignObject><text x="736" y="535" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">peer: added (10...</text></switch></g><path fill="none" stroke="#000" stroke-miterlimit="10" d="M 864.63 659 L 761 659" pointer-events="stroke"/><path fill="#000" stroke="#000" stroke-miterlimit="10" d="M 869.88 659 L 862.88 662.5 L 864.63 659 L 862.88 655.5 Z" pointer-events="all"/><rect width="150" height="170" x="871" y="604" fill="#fff" stroke="#000" pointer-events="all" rx="22.5" ry="22.5"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:148px;height:1px;padding-top:689px;margin-left:873px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px">devp2p:ETH</b></span></div><div style="text-align:right;font-size:12px"><span style="font-size:12px"><b style="font-size:12px"><br style="font-size:12px"/></b></span></div><font color="#00f" style="font-size:12px"/><font style="font-size:12px">ETH (EventEmitter)<br/></font>version: 62/63<br style="font-size:12px"/><font color="#00f" style="font-size:12px"><br/></font><font style="font-size:12px">NEW_BLOCK_HASHES<br/>TX<br/>GET_BLOCK_HEADERS<br/>...<br/></font><br/><font/><font color="#00f" style="background-color:#fcc">_send()</font><span style="background-color:#ff0"><b>(12)</b></span></div></div></div></foreignObject><text x="873" y="693" fill="#000" font-family="Helvetica" font-size="12">devp2p:ETH...</text></switch></g><rect width="150" height="50" x="924" y="746" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:771px;margin-left:999px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><font style="font-size:11px"><span style="color:#222;font-family:&quot;roboto&quot;,&quot;arial&quot;,sans-serif;text-align:left">←</span><span style="text-align:left">dynamically set</span><span style="color:#222;font-family:&quot;roboto&quot;,&quot;arial&quot;,sans-serif;text-align:left"><br/></span></font><div style="text-align:left;font-size:11px"><font style="font-size:11px">in Peer:SubProtocol</font></div><div style="text-align:left;font-size:11px"><font style="font-size:11px">constructor</font></div></div></div></div></foreignObject><text x="999" y="775" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">← dynamically set...</text></switch></g><rect width="160" height="50" x="940" y="542" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:567px;margin-left:1020px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="text-align:left">parsePacketContent(data)</div><div style="text-align:left">Body: obj.protocol,</div><div style="text-align:left">_handleMessage()</div></div></div></div></foreignObject><text x="1020" y="571" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">parsePacketContent(data)...</text></switch></g><path fill="none" stroke="red" stroke-miterlimit="10" d="M 871 639 L 768.87 639" pointer-events="stroke"/><path fill="red" stroke="red" stroke-miterlimit="10" d="M 762.12 639 L 771.12 634.5 L 768.87 639 L 771.12 643.5 Z" pointer-events="all"/><rect width="60" height="30" x="799" y="607" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:622px;margin-left:829px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><font color="red">status<br/>message</font></div></div></div></foreignObject><text x="829" y="626" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">status...</text></switch></g><rect width="100" height="20" x="766" y="659" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:669px;margin-left:816px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap">eth.sendStatus()</div></div></div></foreignObject><text x="816" y="673" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">eth.sendStatus()</text></switch></g><rect width="18" height="20" x="801" y="673" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe flex-start;justify-content:unsafe flex-start;width:16px;height:1px;padding-top:680px;margin-left:803px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal"><b style="color:#000;font-family:&quot;helvetica&quot;;font-size:12px;font-style:normal;letter-spacing:normal;text-align:left;text-indent:0;text-transform:none;word-spacing:0;background-color:#ff0">(11)</b></div></div></div></foreignObject><text x="803" y="692" fill="#000" font-family="Helvetica" font-size="12">(11)</text></switch></g><rect width="300" height="30" x="800" y="504" fill="#f8cecc" stroke="#b85450" stroke-width="2" pointer-events="all"/><rect width="280" height="20" x="809" y="509" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:1px;height:1px;padding-top:519px;margin-left:811px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><div style="font-size:11px"><span>Sends the &quot;real&quot; data</span><span>like</span><span>block hashes &amp;</span><span>transactions.</span></div></div></div></div></foreignObject><text x="811" y="523" fill="#000" font-family="Helvetica" font-size="12">Sends the &quot;real&quot; data like block hashes &amp; tran...</text></switch></g><rect width="60" height="20" x="803" y="484" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:494px;margin-left:833px"><div style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><b><font style="font-size:24px" color="#b85450">ETH</font></b></div></div></div></foreignObject><text x="833" y="498" fill="#000" font-family="Helvetica" font-size="12" text-anchor="middle">ETH</text></switch></g><rect width="110" height="20" x="952" y="230" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:1px;height:1px;padding-top:240px;margin-left:954px"><div style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap">Auth, Ack Create</div></div></div></foreignObject><text x="954" y="244" fill="#000" font-family="Helvetica" font-size="12">Auth, Ack Create</text></switch></g><rect width="440" height="60" x="21" y="44" fill="#fff2cc" stroke="#ff8000" stroke-width="2" pointer-events="all"/><rect width="260" height="50" x="192" y="49" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow:visible;text-align:left" width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-end;width:1px;height:1px;padding-top:74px;margin-left:450px"><div style="box-sizing:border-box;font-size:0;text-align:right"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap"><font style="font-size:12px">Manages a list of peers (KBucket),<br/>tries to find new peers (Server: findNeighbors),<br/>and handles basic connection (ping -&gt; pong).</font></div></div></div></foreignObject><text x="450" y="78" fill="#000" font-family="Helvetica" font-size="12" text-anchor="end">Manages a list of peers (KBucket),...</text></switch></g></g><switch><a target="_blank" transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487"><text x="50%" y="100%" font-size="10" text-anchor="middle">Viewer does not support full SVG 1.1</text></a></switch></svg>